= bootstrap_form_for @user_cluster, url: clusterable.create_user_clusters_path, as: :cluster do |field|
  = field.text_field :name, placeholder: s_('ClusterIntegration|Kubernetes cluster name'), required: true, label: s_('ClusterIntegration|Kubernetes cluster name'), label_class: 'label-bold'
  - if has_multiple_clusters?
    .form-group
      = field.label :environment_scope, s_('ClusterIntegration|Environment scope'), class: 'label-bold'
      = field.text_field :environment_scope, class: 'form-control', placeholder: s_('ClusterIntegration|Environment scope')

  = field.fields_for :platform_kubernetes, @user_cluster.platform_kubernetes do |platform_kubernetes_field|
    = platform_kubernetes_field.text_field :api_url, required: true, placeholder: s_('ClusterIntegration|API URL'), label: s_('ClusterIntegration|API URL'), label_class: 'label-bold'
    = platform_kubernetes_field.text_area :ca_cert, class: 'form-control', placeholder: s_('ClusterIntegration|Certificate Authority bundle (PEM format)'), label: s_('ClusterIntegration|CA Certificate'), label_class: 'label-bold'
    = platform_kubernetes_field.text_field :token, required: true, class: 'form-control', placeholder: s_('ClusterIntegration|Service token'), label: s_('ClusterIntegration|Token'), autocomplete: 'off', label_class: 'label-bold'

    - if @user_cluster.allow_user_defined_namespace?
      .form-group
        = platform_kubernetes_field.label :namespace, s_('ClusterIntegration|Project namespace (optional, unique)'), class: 'label-bold'
        = platform_kubernetes_field.text_field :namespace, class: 'form-control', placeholder: s_('ClusterIntegration|Project namespace')

    .form-group
      .form-check
        = platform_kubernetes_field.check_box :authorization_type, { class: 'form-check-input qa-rbac-checkbox' }, 'rbac', 'abac'
        = platform_kubernetes_field.label :authorization_type, s_('ClusterIntegration|RBAC-enabled cluster'), class: 'form-check-label label-bold'
        .form-text.text-muted
          = s_('ClusterIntegration|Enable this setting if using role-based access control (RBAC).')
          = s_('ClusterIntegration|This option will allow you to install applications on RBAC clusters.')
          = link_to _('More information'), help_page_path('user/project/clusters/index.md', anchor: 'role-based-access-control-rbac-core-only'), target: '_blank'

    .form-group
      = field.submit s_('ClusterIntegration|Add Kubernetes cluster'), class: 'btn btn-success'
